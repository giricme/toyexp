# Configuration for projection experiment
# Compare regression vs flow models with high-dim output in low-dim subspace

# Experiment settings
experiment:
  name: "proj_experiment"
  mode: "regression"  # or "flow"
  seed: 42
  device: "cuda"  # or "cpu"
  output_dir: "./outputs/proj"

# Dataset configuration
dataset:
  type: "ProjectedTargetFunctionDataset"
  num_train: 50
  num_eval: 1000
  target_dim: 8  # High-dimensional output
  condition_dim: 1
  c_min: 0.0
  c_max: 1.0
  
  # Target function parameters
  num_components: 3
  weight_strategy: "uniform"  # or "inverse_freq"
  sampling_strategy: "grid"  # or "random"
  
  # Projection parameters
  low_dim: 2  # Dimension of subspace (rank of projection matrix)
  
  # Seeds for reproducibility
  freq_seed: 42
  phase_seed: 43
  weight_seed: 44
  proj_seed: 46
  sample_seed: 45

# Network configuration
network:
  architecture: "concat"  # or "film"
  hidden_dim: 256
  num_layers: 3
  activation: "relu"

# Training configuration
training:
  loss_type: "l2"
  batch_size: 32
  num_epochs: 5000
  learning_rate: 0.001
  
  # Logging intervals
  log_interval: 100
  eval_interval: 500
  save_interval: 1000
  
  # Initial distribution (for flow models)
  initial_dist: "zeros"  # or "gaussian"

# Evaluation configuration
evaluation:
  num_eval_steps: 1  # For regression, always 1. For flow, can be 10, 50, 100, etc.
  integration_method: "euler"  # or "rk4"
  
  # Projection analysis
  analyze_subspace: true  # Whether to analyze learned vs true subspace